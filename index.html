<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãŠé¡˜ã„ãƒ‰ãƒ©ã‚¤ãƒ–ç¤¼æ³•ã€œé‹è»¢è€…ã‚µãƒãƒ¼ãƒˆã€œ</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <style>
    body { font-family: "ãƒ¡ã‚¤ãƒªã‚ª", Meiryo, Arial, sans-serif; background: #f8f6fd; margin: 0; }
    header { background: #533296; color: #fff; padding: 1.2em 0; text-align: center; }
    .container { max-width: 480px; margin: auto; background: #fff; border-radius: 13px; box-shadow: 0 3px 13px #ddd; padding: 2em; margin-top: 2em; }
    h2 { margin-top: 0;}
    label { display: block; margin-top: 1.2em; font-weight: bold;}
    input, select { width: 100%; padding: .7em; border-radius: 8px; border: 1px solid #bcb7d6; margin-top: .35em;}
    .btn { background: #533296; color: #fff; border:none; border-radius: 8px; padding: .8em; text-align:center; width:100%; font-size:1.08em; cursor:pointer; margin-top:1.5em; }
    .btn:active { background: #301c62;}
    .section {border-top: 1px dotted #dcccf5; margin-top:2em; padding-top:1.5em;}
    .result {background: #f2edfa; margin-top: 2em; padding: 1em; border-radius:11px;}
    .result strong { color: #533296;}
    .gift, .music, .topic, .spot {border: 1px solid #e7dbfc; padding:.75em 1em; border-radius:7px; margin-top: 1em;}
    .small { font-size: 0.95em; color:#665;}
    .footer { text-align: center; color:#888; font-size:0.92em; margin-top:3em;}
    .thankBtn { display: block; margin:auto; background:#ff6a01; color:#fff; font-weight:bold; border: none; border-radius: 24px; width:70%; font-size:1em; padding: .8em; margin-top:1em;}
    .thankMsg { color:#ff6a01; font-size:1.15em; margin-top:0.7em;}
    .listitem {margin-bottom: 0.7em;}
    .copyBtn { background: #e0e9fc; color:#533296; border:none; border-radius: 6px; padding: .4em .9em; cursor:pointer;}
    .copyBtn:active { background: #aad0fc;}
  </style>
</head>
<body>
<header>
  <h1>ãŠé¡˜ã„ãƒ‰ãƒ©ã‚¤ãƒ–ç¤¼æ³•</h1>
  <div>é‹è»¢ã™ã‚‹äººãŒæ¥½ã—ããªã‚‹ã€ä¹—ã‚‹äººã®å¿ƒé£ã„ã‚µãƒãƒ¼ãƒˆï¼</div>
</header>
<div class="container">
  <h2>ä¹—è»Šä¾é ¼ &amp; é‹è»¢è€…ã‚µãƒãƒ¼ãƒˆ</h2>
  <form id="driveForm">
    <label>
      å‡ºç™ºåœ°
      <input type="text" id="start" placeholder="ä¾‹ï¼šæ±äº¬é§…" required>
    </label>
    <label>
      ç›®çš„åœ°
      <input type="text" id="end" placeholder="ä¾‹ï¼šç®±æ ¹æ¸©æ³‰" required>
    </label>
    <label>
      ä¹—è»Šäººæ•°ï¼ˆé‹è»¢è€…å«ã‚€ï¼‰
      <input type="number" id="people" min="2" value="2" required>
    </label>
    <label>
      è»Šç¨®
      <select id="carType">
        <option value="compact">ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆï¼ˆç‡ƒè²»15km/Lï¼‰</option>
        <option value="sedan">ã‚»ãƒ€ãƒ³ï¼ˆç‡ƒè²»12km/Lï¼‰</option>
        <option value="minivan">ãƒŸãƒ‹ãƒãƒ³ï¼ˆç‡ƒè²»9km/Lï¼‰</option>
      </select>
    </label>
    <label>
      é«˜é€ŸåŒºé–“ï¼ˆkmï¼‰
      <input type="number" id="highwayKm" min="0" value="60">
      <span class="small">â€»ç›®å®‰ã§OK</span>
    </label>
    <label>
      é§è»Šæ–™é‡‘ï¼ˆå††ãƒ»åˆè¨ˆï¼‰
      <input type="number" id="parking" min="0" value="800">
    </label>
    <label>
      æƒ³å®šé‹è»¢æ™‚é–“ï¼ˆæ™‚é–“ï¼‰
      <input type="number" id="driveTime" min="0.5" step="0.5" value="2">
    </label>
    <button type="submit" class="btn">åˆ†æ‹…ãƒ»ã‚µãƒãƒ¼ãƒˆã‚’ç®—å‡º</button>
  </form>

  <div id="resultBlock" class="result" style="display:none;">
    <h3>åˆ†æ‹…ãƒ»ãŠé¡˜ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h3>
    <div id="shareResult"></div>
    <div id="messageResult" style="margin-top:1em;line-height:1.6;"></div>
    <div style="margin-top:1em;">
      <a id="paypayLink" target="_blank" class="btn" style="background:#23b96e;">PayPayã§é€é‡‘ã™ã‚‹</a>
    </div>
  </div>
  
  <div id="supportBlock" style="display:none;">
    <!--é‹è»¢è€…ä½“é¨“å‘ä¸Šã‚»ã‚¯ã‚·ãƒ§ãƒ³-->
    <div class="section music">
      <strong>ãŠã™ã™ã‚ãƒ‰ãƒ©ã‚¤ãƒ–æ›²ãƒªã‚¹ãƒˆ</strong><br>
      <div id="musicList"></div>
    </div>
    <div class="section topic">
      <strong>ä»Šæ—¥ã®é›‘è«‡ãƒ»è©±é¡Œãƒã‚¿</strong><br>
      <div id="topicList"></div>
      <button class="copyBtn" onclick="copyTopic()">ã“ã®è©±é¡Œã‚’ã‚³ãƒ”ãƒ¼</button>
    </div>
    <div class="section spot">
      <strong>ä¼‘æ†©å€™è£œãƒ»ã”å½“åœ°ã‚¹ãƒãƒƒãƒˆ</strong><br>
      <div id="spotList"></div>
    </div>
    <div class="section gift">
      <strong>ç‰¹åˆ¥ã‚®ãƒ•ãƒˆæ¡ˆ</strong><br>
      é‹è»¢ã‚ã‚ŠãŒã¨ã†ã‚®ãƒ•ãƒˆã‚‚ã©ã†ãï¼<br>
      <a href="https://giftee.com/" target="_blank">ã‚³ãƒ¼ãƒ’ãƒ¼ãƒã‚±ãƒƒãƒˆ</a> /
      <a href="https://yado.knt.co.jp/" target="_blank">æ—¥å¸°ã‚Šæ¸©æ³‰å‰²å¼•</a> /
      <a href="https://tabiiro.jp/gift/" target="_blank">ã”å½“åœ°ã‚°ãƒ«ãƒ¡</a>
    </div>
    <div style="margin-top:2em;">
      <button class="thankBtn" onclick="showThank()">ã‚ã‚ŠãŒã¨ã†ã‚’é€ä¿¡ï¼</button>
      <div id="thankMsgArea"></div>
    </div>
  </div>
</div>
<div class="footer">
  è¿·æƒ‘ã‹ã‘ãŸããªã„ä¸å®‰ã‚’ã€é€æ˜ãªåˆ†æ‹…ï¼‹å¿ƒé£ã„ã§è§£æ¶ˆã€‚<br>
  ãƒ‰ãƒ©ã‚¤ãƒ–ãŒæœ€é«˜ã®æ€ã„å‡ºã«ãªã‚‹ã‚ˆã†ã«ã€‚<br>&copy;ãƒ‰ãƒ©ã‚¤ãƒ–ç¤¼æ³• MVPæ¡ˆ
</div>

<script>
function yen(x){ return 'Â¥'+(Math.round(x)).toLocaleString(); }
// éŸ³æ¥½ãƒªã‚¹ãƒˆï¼ˆã‚µãƒ³ãƒ—ãƒ«/å®Ÿè£…ã§ã¯Spotifyç­‰APIé€£æºå¯ï¼‰
const musicSamples = [
  "ãƒ‰ãƒ©ã‚¤ãƒ–ã«ã´ã£ãŸã‚Šï¼šOfficialé«­ç”·dismã€Pretenderã€",
  "çˆ½å¿«J-popï¼šæ˜Ÿé‡æºã€SUNã€",
  "ã¿ã‚“ãªã§æ¥½ã—ãï¼šback numberã€é«˜å¶ºã®èŠ±å­ã•ã‚“ã€",
  "ã¡ã‚‡ã£ã¨æ‡ãƒ¡ãƒ­ï¼šDREAMS COME TRUEã€æœªæ¥äºˆæƒ³å›³â…¡ã€",
  "æ´‹æ¥½å®šç•ªï¼šBruno Marsã€Treasureã€",
  "æ°—åˆ†è»¢æ›ï¼šç±³æ´¥ç„å¸«ã€Lemonã€"
];
const topicSamples = [
  "æœ€è¿‘ãƒãƒã£ã¦ã‚‹ã“ã¨ã€ãŠäº’ã„è©±ãã†ï¼",
  "æœ€è¿‘è¦‹ãŸæ˜ ç”»ã‚„ãƒ‰ãƒ©ãƒã§ãŠã™ã™ã‚ã¯ï¼Ÿ",
  "ä»Šåº¦è¡Œã£ã¦ã¿ãŸã„æ—…ãƒ»è¡—ã¯ï¼Ÿ",
  "å¥½ããªã‚³ãƒ³ãƒ“ãƒ‹ã‚¹ã‚¤ãƒ¼ãƒ„ã€ãªã«ï¼Ÿ",
  "ã‚‚ã—1é€±é–“ä¼‘ã¿ãŒã‚ã£ãŸã‚‰ä½•ã—ãŸã„ï¼Ÿ",
  "é«˜æ ¡æ™‚ä»£ã®æ€ã„å‡ºè©±"
];
const spotSamples = [
  "æµ·è€åSAï¼šåç‰©ã‚°ãƒ«ãƒ¡ï¼†åºƒã„ä¼‘æ†©æ‰€",
  "ç®±æ ¹ã€å¯Œå£«å±‹ãƒ›ãƒ†ãƒ« ã‚«ãƒ•ã‚§ã€ã§ä¼‘æ†©",
  "å°ç”°åŸã•ã‹ãªã‚»ãƒ³ã‚¿ãƒ¼ã§é£Ÿäº‹ä¼‘æ†©",
  "è¶³æŸ„SAã®çµ¶æ™¯å±•æœ›å°",
  "ã”å½“åœ°ã‚³ãƒ³ãƒ“ãƒ‹ã€ãƒ­ãƒ¼ã‚½ãƒ³ç®±æ ¹ã€ã§é™å®šã‚¹ã‚¤ãƒ¼ãƒ„"
];

document.getElementById("driveForm").onsubmit = function(e){
  e.preventDefault();
  // å…¥åŠ›å€¤å–å¾—
  const start = document.getElementById("start").value.trim();
  const end = document.getElementById("end").value.trim();
  let people = parseInt(document.getElementById("people").value);
  const carType = document.getElementById("carType").value;
  const highwayKm = parseFloat(document.getElementById("highwayKm").value);
  const parking = parseInt(document.getElementById("parking").value);
  const driveTime = parseFloat(document.getElementById("driveTime").value);

  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè·é›¢è¨ˆç®—ï¼ˆé«˜é€ŸåŒºé–“x1.25ã§å…¨ä½“è·é›¢ã¨ä»®å®šï¼‰
  const totalKm = highwayKm*1.25;

  // ç‡ƒè²»
  let fuelEff = 15;
  if(carType==="sedan") fuelEff = 12;
  if(carType==="minivan") fuelEff = 9;

  // æ¦‚ç®—
  const fuelCost = totalKm/fuelEff*170; // ã‚¬ã‚½ãƒªãƒ³170å††/Lä»®å®š
  const highwayCost = highwayKm*25;     // é«˜é€Ÿ1kmã‚ãŸã‚Š25å††ç›®å®‰
  const totalCost = fuelCost+highwayCost+parking;
  const shareCost = totalCost/people;

  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ
  let msg =
    `ã“ã‚“ã«ã¡ã¯ï¼ˆãƒ‰ãƒ©ã‚¤ãƒãƒ¼åï¼‰ã•ã‚“ï¼<br>`;
  msg += `${start}â†’${end}ã¸ã®ãƒ‰ãƒ©ã‚¤ãƒ–ã€\nãœã²é‹è»¢ãŠé¡˜ã„ã—ãŸãã¦ãƒ•ã‚©ãƒ¼ãƒ ä½œæˆã—ã¾ã—ãŸã€‚<br><br>`;
  msg += `ã€äº¤é€šè²»åˆ†æ‹…ã®è¦‹ç©ã‚Šã€‘<br>`
    + `ç‡ƒæ–™: ${yen(fuelCost)} + é«˜é€Ÿ: ${yen(highwayCost)} + é§è»Š: ${yen(parking)}<br>`
    + `ï¼ˆäººæ•°${people}äººã€1äººã‚ãŸã‚Š: <strong>${yen(shareCost)}</strong>ï¼‰<br><br>`;
  msg += `ã€ãŠç¤¼ï¼†å¿ƒé£ã„ã€‘<br>é€é‡‘ã¯PayPayã§ã™ãã€‚ç¾å‘³ã—ã„ã‚³ãƒ¼ãƒ’ãƒ¼ã‚„æ¸©æ³‰ã‚®ãƒ•ãƒˆã‚‚ã”ç”¨æ„ï¼<br>`;
  msg += `ã€æ—…ç¨‹ãƒ»ä¼‘æ†©ã€‘<br>é‹è»¢${driveTime}æ™‚é–“ãªã®ã§ä¼‘æ†©ã¯2å›ç¨‹åº¦ã€ç«‹ã¡å¯„ã‚Šã‚¹ãƒãƒƒãƒˆï¼†ãƒªã‚¯ã‚¨ã‚¹ãƒˆå„ªå…ˆã—ã¾ã™ã€‚<br>`;
  msg += `ã€å¿«é©ãƒ‰ãƒ©ã‚¤ãƒ–ã‚µãƒãƒ¼ãƒˆã€‘<br>é¸æ›²ã‚„è©±é¡Œã€ã‚¹ãƒãƒƒãƒˆã‚‚äº‹å‰ã«ç”¨æ„ã—ã¾ã—ãŸã€‚<br>`;
  msg += `ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼ğŸ˜Š`;

  // é€é‡‘ãƒªãƒ³ã‚¯ä»®ç”Ÿæˆï¼ˆå®Ÿéš›ã¯PayPay APIï¼‰
  const money = Math.round(shareCost);
  const payLink = `https://paypay.ne.jp/send/?amount=${money}&message=ãƒ‰ãƒ©ã‚¤ãƒ–ç¤¼æ³•äº¤é€šè²»`;

  document.getElementById("resultBlock").style.display = "";
  document.getElementById("shareResult").innerHTML =
    `<strong>æ¦‚ç®—åˆ†æ‹…é¡</strong>ï¼ˆ1äººã‚ãŸã‚Šï¼‰ï¼š<big style="font-size:1.25em;color:#208864;">${yen(shareCost)}</big> <br>
    <span class="small">ç·è²»ç”¨=${yen(totalCost)}ï¼ˆç‡ƒæ–™${yen(fuelCost)} + é«˜é€Ÿ${yen(highwayCost)} + é§è»Š${yen(parking)}ï¼‰</span>
    `;
  document.getElementById("messageResult").innerHTML = msg;
  document.getElementById("paypayLink").href = payLink;
  document.getElementById("supportBlock").style.display = "";
  // ã‚µãƒãƒ¼ãƒˆæ©Ÿèƒ½è¡¨ç¤º
  let musicHtml = "";
  for(let i=0;i<musicSamples.length;i++){
    musicHtml += `<div class="listitem">${musicSamples[i]}</div>`;
  }
  document.getElementById("musicList").innerHTML = musicHtml;
  const random = Math.floor(Math.random()*topicSamples.length);
  document.getElementById("topicList").innerHTML = topicSamples[random];
  let spotHtml = "";
  for(let i=0;i<spotSamples.length;i++){
    spotHtml += `<div class="listitem">${spotSamples[i]}</div>`;
  }
  document.getElementById("spotList").innerHTML = spotHtml;
};

// è©±é¡Œã‚³ãƒ”ãƒ¼
function copyTopic(){
  const topic = document.getElementById("topicList").innerText;
  navigator.clipboard.writeText(topic);
  alert("è©±é¡Œãƒã‚¿ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
}
// ã‚ã‚ŠãŒã¨ã†ãƒœã‚¿ãƒ³
function showThank(){
  document.getElementById("thankMsgArea").innerHTML =
    `<div class="thankMsg">ãƒ‰ãƒ©ã‚¤ãƒ–é‹è»¢ã€æœ¬å½“ã«ã‚ã‚ŠãŒã¨ã†ï¼<br>ã¿ã‚“ãªã§å¿«é©ãªæ™‚é–“ã«ã—ã‚ˆã†ã­ï¼ğŸ˜Š</div>`;
  setTimeout(()=>{document.getElementById("thankMsgArea").innerHTML='';},2500);
}
</script>
</body>
</html>
